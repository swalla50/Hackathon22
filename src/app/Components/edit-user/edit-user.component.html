<div class="edit-user">
    <div class="edit-user-container">
        <h3 class="edit-user-heading"> Edit User </h3>
        <div class="row1-edit-user">
            <div class="row1-left">
                <div class="container">
                    <h4>Upload a profile image
                    </h4>
                    <div class="avatar-upload">
                        <div class="avatar-edit">
                            <input type="file" id="imageUpload" accept=".png, .jpg, .jpeg">
                            <label for="imageUpload"></label>
                        </div>
                        <div class="avatar-preview">
                            <div id="imagePreview"
                                style="background-image: url('https://toppng.com/uploads/preview/user-account-management-logo-user-icon-11562867145a56rus2zwu.png');">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- row contains user picture and the contact reminders -->
            <div class="row1-right">
                <div class="left-rightside">
                    <button type="button" class='myReminder-btn' (click)="openVerticallyCentered(content1)">
                        <fa-icon [icon]="faCalendarPlus" size='8x' style="color: #033871; transform: rotate(17deg);">
                        </fa-icon>
                        <br />
                        <h4>Add a Reminder</h4>
                    </button>
                </div>

                <!-- used to show the user's current reminders that are set and for which object (report, lease,building,user defined) -->
                <div class="right-rightside">
                    <button type="button" class='myReminder-btn' (click)="openVerticallyCentered(content)">
                        <fa-icon [icon]="faBell" size='8x' style="color: #033871; transform: rotate(17deg);"></fa-icon>
                        <br />
                        <h4>View Your Reminders</h4>
                    </button>

                </div>
            </div>
        </div>

        <div class="row2-edit-user">
            <div  class="row2-container-left">
                <h4>Edit Contact Information: </h4> 
                <div  class="user-info-input-container">
                <ng-container  *ngIf="isEditingContactinfo != true">
                    <button type="button" class="edit-my-contact"(click)="switchEditModeContactinfo(iContactinfo)"><fa-icon [icon]="faPencil" size='sm'></fa-icon> Edit</button>
                        <div class="input-group mb-3" *ngIf="userObj">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faFingerprint" size='sm'></fa-icon> &nbsp;System Contact ID:
                                </span>
                            </div>
                            <input disabled type="text" class="user-info-input" disabled
                                placeholder="{{userObj.contactID}}" aria-label="SystemContactID"
                                aria-describedby="basic-addon1">

                        </div>

                        <label class="edit-user-label">Contact Suffix</label><br/>
                        <div class="input-group mb-3">
                            
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                </span>
                            </div>
                            <input disabled type="text" class="user-info-input" disabled
                                placeholder="{{userObj.contactSuffix}}" aria-label="SystemContactID"
                                aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">First Name</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                </span>
                            </div>
                            
                            <input disabled type="text" class="user-info-input" disabled placeholder="{{userObj.contactFirstName}}"
                                aria-label="contactFirstName" aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">Middle Name</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                </span>
                            </div>
                            
                            <input disabled type="text" class="user-info-input" disabled placeholder="{{userObj.contactMiddleName}}"
                                aria-label="contactMiddleName" aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">Last Name</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                </span>
                            </div>
                            
                            <input disabled type="text" class="user-info-input" disabled placeholder="{{userObj.contactLastName}}"
                                aria-label="LastName" aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">Title</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                </span>
                            </div>
                            <input type="text" class="user-info-input" disabled placeholder="{{userObj.contactTitle}}"
                                aria-label="contactTitle" aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">User ID</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faFingerprint" size='sm'></fa-icon>
                                </span>
                            </div>
                            <input type="text" class="user-info-input" disabled placeholder="{{userObj.contactUserID}}"
                                aria-label="UserID" aria-describedby="basic-addon1">

                        </div>
                        <label class="edit-user-label">Email</label><br/>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="basic-addon1">
                                    <fa-icon [icon]="faEnvelopeCircleCheck" size='sm'></fa-icon>
                                </span>
                            </div>
                            <input type="text" class="user-info-input" disabled placeholder="{{userObj.contactEmailAddress}}"
                                aria-label="Email" aria-describedby="basic-addon1">

                        </div>
                        <div class="input-group mb-3">

                            <div class="form-check form-check-inline">
                                <label class="form-check-label" for="inlineCheckbox1">Allow Log On: </label>
                                <input class="form-check-input" *ngIf="userObj.allowLogon === true" type="checkbox"
                                    id="inlineCheckbox1" value="option1" disabled checked>
                                <input class="form-check-input" *ngIf="userObj.allowLogon === false" type="checkbox"
                                    id="inlineCheckbox1" value="option1" disabled readonly>

                            </div>
                            <div class="form-check form-check-inline">
                                <label class="form-check-label" for="inlineCheckbox2">Contact Active: </label>
                                <input class="form-check-input" *ngIf="userObj.contactActive === true" type="checkbox"
                                    id="inlineCheckbox2" value="option2" disabled checked>
                                <input class="form-check-input" *ngIf="userObj.contactActive === false" type="checkbox"
                                    id="inlineCheckbox2" value="option2" disabled>
                            </div>
                            <div class="form-check form-check-inline">
                                <label class="form-check-label" for="inlineCheckbox3">Hide Default login when using
                                    Profiles: </label>
                                <input class="form-check-input" *ngIf="userObj.hideLogin === true" type="checkbox"
                                    id="inlineCheckbox3" value="option3" disabled checked>
                                <input class="form-check-input" *ngIf="userObj.hideLogin === false" type="checkbox"
                                    id="inlineCheckbox3" value="option3" disabled>

                            </div>

                        </div>
                    </ng-container>

                    
                        
                            <ng-container #container class="container"  *ngIf="isEditingContactinfo == true">
                                <form >
                            <div class="input-group mb-3" *ngIf="userObj">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faFingerprint" size='sm'></fa-icon> &nbsp;System Contact ID:
                                    </span>
                                </div>
                                <input  type="text" class="user-info-input" disabled
                                    placeholder="{{userObj.contactID}}" aria-label="SystemContactID"
                                    aria-describedby="basic-addon1">
    
                            </div>
                            <label class="edit-user-label">Suffix</label><br/>
                            
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <select  name="userObj.contactSuffix" [(ngModel)]="userObj.contactSuffix" class="custom-select" id="inputGroupSelect02">
                                    <option value="null">[Select a Suffix]</option>
                                    <option value="Jr.">Jr.</option>
                                    <option value="Sr.">Sr.</option>
                                    <option value="I">I</option>
                                    <option value="II">II</option>
                                    <option value="III">II</option>
                                </select>
    
                            </div>
                            <label class="edit-user-label">First Name</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input type="text"  [(ngModel)]="userObj.contactFirstName" name="userObj.contactFirstName" class="user-info-input disabled" placeholder="{{userObj.contactFirstName}}"
                                    aria-label="contactFirstName" aria-describedby="basic-addon1">
    
                            </div>
                            <label class="edit-user-label">Middle Name</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input type="text"  [(ngModel)]="userObj.contactMiddleName" name="userObj.contactMiddleName" class="user-info-input disabled" placeholder="{{userObj.contactMiddleName}}"
                                    aria-label="contactMiddleName" aria-describedby="basic-addon1">
    
                            </div>
                            <label class="edit-user-label">Last Name</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input type="text"  name="userObj.contactLastName" [(ngModel)]="userObj.contactLastName" class="user-info-input disabled" placeholder="{{userObj.contactLastName}}"
                                    aria-label="LastName" aria-describedby="basic-addon1">
    
                            </div>
                            <label class="edit-user-label">Title</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faUser" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input type="text"  [(ngModel)]="userObj.contactTitle"  name="userObj.contactTitle" class="user-info-input disabled" placeholder="{{userObj.contactTitle}}"
                                    aria-label="contactTitle" aria-describedby="basic-addon1">
    
                            </div>

                            <label class="edit-user-label">User ID</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faFingerprint" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input type="text"   name="userObj.contactUserID" [(ngModel)]="userObj.contactUserID" class="user-info-input disabled" placeholder="{{userObj.contactUserID}}"
                                    aria-label="UserID" aria-describedby="basic-addon1">
    
                            </div>
                            <label class="edit-user-label">Email</label><br/>
                            <div class="input-group mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon1">
                                        <fa-icon [icon]="faEnvelopeCircleCheck" size='sm'></fa-icon>
                                    </span>
                                </div>
                                <input  [(ngModel)]="userObj.contactEmailAddress" name="userObj.contactEmailAddress" type="text" class="user-info-input disabled" placeholder="{{userObj.contactEmailAddress}}"
                                    aria-label="Email" aria-describedby="basic-addon1">
    
                            </div>
                            <div class="input-group mb-3">
    
                                <div class="form-check form-check-inline">
                                    <label class="form-check-label" for="inlineCheckbox1">Allow Log On: </label>
                                    <input class="form-check-input" name="userObj.allowLogon" [(ngModel)]="userObj.allowLogon" *ngIf="userObj.allowLogon === true" type="checkbox"
                                        id="inlineCheckbox1" value="option1"  checked>
                                    <input class="form-check-input"  name="userObj.allowLogon" [(ngModel)]="userObj.allowLogon" *ngIf="userObj.allowLogon === false" type="checkbox"
                                        id="inlineCheckbox1" value="option1"  readonly>
    
                                </div>
                                <div class="form-check form-check-inline">
                                    <label class="form-check-label" for="inlineCheckbox2">Contact Active: </label>
                                    <input class="form-check-input" name="userObj.contactActive" [(ngModel)]="userObj.contactActive" *ngIf="userObj.contactActive === true" type="checkbox"
                                        id="inlineCheckbox2" value="option2"  checked>
                                    <input class="form-check-input" name="userObj.contactActive" [(ngModel)]="userObj.contactActive" *ngIf="userObj.contactActive === false" type="checkbox"
                                        id="inlineCheckbox2" value="option2" >
                                </div>
                                <div class="form-check form-check-inline">
                                    <label class="form-check-label" for="inlineCheckbox3">Hide Default login when using
                                        Profiles: </label>
                                    <input class="form-check-input" name="userObj.hideLogin" [(ngModel)]="userObj.hideLogin" *ngIf="userObj.hideLogin === true" type="checkbox"
                                        id="inlineCheckbox3" value="option3"  checked>
                                    <input class="form-check-input"  name="userObj.hideLogin" [(ngModel)]="userObj.hideLogin" *ngIf="userObj.hideLogin === false" type="checkbox"
                                        id="inlineCheckbox3" value="option3" >
    
                                </div>
    
                            </div>
                            <button type="submit"class="save-user-info-btn" (click)="switchEditModeContactinfofalse(iContactinfo);updateUser(userObj.contactID,userObj.contactUserID,userObj.contactFirstName, userObj.contactLastName,userObj.contactMiddleName, userObj.contactSuffix,userObj.contactTitle,userObj.contactEmailAddress, userObj.allowLogon, userObj.contactActive,userObj.hideLogin);">Save</button>
                        </form>
                        </ng-container>
                    
                    </div>

            </div>
            <div class="row2-container-right" *ngIf="userObj.contactRole ==='Admin'">
                <h4>All Reminders By Contact: </h4>
                <button class="excelexport-btn1" (click)="allexportexcel()"><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                <div class="allreminder-contactlist-search-container">
                    <h4 class="contact-filterd-number">({{(contacts | filter:AllContacts)?.length}})</h4>
                    <input type="text" class="all-reminder-contact-search" placeholder="Search Contacts"
                        [(ngModel)]="AllContacts">
                </div>
                <mat-expansion-panel *ngFor="let contact of contacts| filter: AllContacts"
                    (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                        <mat-panel-title *ngIf="allreminders">
                            {{contact.contactFirstName}} {{contact.contactLastName}}
                        </mat-panel-title>
                        <!-- <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                    </mat-expansion-panel-header>
                    <input type="text" class="all-reminder-schedule-search"
                        placeholder="Search All Reminders for {{contact.contactFirstName}} {{contact.contactLastName}}"
                        [(ngModel)]="Allterm">
                    <table class="reminder-schedule-table table-striped">
                        <tr class="reminder-thead">
                            <th>
                                Contact Name
                            </th>
                            <th>
                                Reminder Type
                            </th>
                            <th>
                                Object's ID
                            </th>
                            <th>
                                Message
                            </th>
                            <th>
                                Frequency
                            </th>
                            <th>
                                Reminder Start Date
                            </th>
                        </tr>
                        <tbody>
                            <tr class="reminder-schedule-table-row"
                                *ngFor="let allreminders of allreminders| filter: Allterm">
                                <td
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    {{allreminders.contactName}}
                                </td>
                                <td
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    {{allreminders.tickleDescription}}
                                </td>
                                <td
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    {{allreminders.objectID}}
                                </td>
                                <td class="all-reminder-message"
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    {{allreminders.ticklerMessage}}
                                </td>
                                <td
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    every {{allreminders.ticklerFreq}} days
                                </td>
                                <td
                                    *ngIf="allreminders.contactID == contact.contactID && allreminders.isDeleted == false">
                                    {{allreminders.startDate}}
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Hidden table -->
                    <table class="reminder-table" hidden="true" id="all-excel-table">
                        <tr class="reminder-thead">
                            <th>
                                Contact Name
                            </th>
                            <th>
                                Reminder Type
                            </th>
                            <th>
                                Object's ID
                            </th>
                            <th>
                                Message
                            </th>
                            <th>
                                Frequency
                            </th>
                            <th>
                                Reminder Start Date
                            </th>
                        </tr>
                        <tbody>
                            <tr class="reminder-schedule-table-row"
                                *ngFor="let allreminders of allreminders| filter: Allterm">
                                <td
                                    *ngIf=" allreminders.isDeleted == false">
                                    {{allreminders.contactName}}
                                </td>
                                <td
                                    *ngIf="allreminders.isDeleted == false">
                                    {{allreminders.tickleDescription}}
                                </td>
                                <td
                                    *ngIf="allreminders.isDeleted == false">
                                    {{allreminders.objectID}}
                                </td>
                                <td class="all-reminder-message"
                                    *ngIf="allreminders.isDeleted == false">
                                    {{allreminders.ticklerMessage}}
                                </td>
                                <td
                                    *ngIf="allreminders.isDeleted == false">
                                    every {{allreminders.ticklerFreq}} days
                                </td>
                                <td
                                    *ngIf="allreminders.isDeleted == false">
                                    {{allreminders.startDate}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </mat-expansion-panel>
            </div>
        </div>
    </div>
</div>

<!-- [(ngModel)]="selectedHierarchy" -->

<ng-template #content let-modal style="z-index: 1000; width: 2000px;">
    <div class="modal-header">
        <div class="modal-header-left">
            <button type="button" class="btn btn-dark"
                (click)="modal.close('Close click'); cancelBuilding(); cancelLease();cancelProjects(); cancelCompany()">
                <fa-icon [icon]="faXmark" size='sm'></fa-icon>
            </button>
        </div>
        <div class="modal-header-right">
            <img class="modal-header-logo" src="assets/Images/homelogocopy.png" />
            <h1 class="header-logo-text">| Real Estate Manager</h1>
        </div>
    </div>

    <h4>Scheduled Reminders: </h4>
    <div class="scheduled-reminder-list-container">

        <mat-accordion>
            <!-- shows user's building reminders -->
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title *ngIf="buildingreminders">
                        Building <h4 class="mycompany-filterd-number">({{(buildingreminders |
                            filter:Buildingterm)?.length}})</h4>
                    </mat-panel-title>
                    <button class="excelexport-btn" (click)="buildingexportexcel()"><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                    <!-- <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                </mat-expansion-panel-header>
                <input type="text" class="building-reminder-schedule-search" placeholder="Search Building Reminders"
                    [(ngModel)]="Buildingterm">
                <table class="reminder-schedule-table table-striped" id="building-excel-table">
                    <tr class="reminder-thead">
                        <th>
                            Building ID
                        </th>
                        <th>
                            Frequency
                        </th>
                        <th>
                            Building Name
                        </th>
                        <th>
                            Reminder Message
                        </th>
                        <th>
                            Message Date (start)
                        </th>
                        <th>

                        </th>
                    </tr>
                    <tbody *ngFor="let display of buildingreminders | filter: Buildingterm;  index as iBuilding">
                        <tr class="reminder-schedule-table-row">
                            <ng-container #timedata *ngIf="enableEditIndexBuilding != iBuilding">
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.buildingID}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    every {{display.ticklerFreq}} days
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.buildingName}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.ticklerMessage}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.startDate| date: 'MMM d, yyyy h:ss aa'}}
                                </td>
                                <td id="{{display.tickleID}}"
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <button (click)="switchEditModeBuilding(iBuilding)" class="edit-reminder-btn">Edit
                                        <fa-icon [icon]="faPencil" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="deleteReminder(display.tickleID)"
                                        class="delete-reminder-btn">Delete
                                        <fa-icon [icon]="faTrashCan" size='1x'></fa-icon>
                                    </button>

                                </td>
                            </ng-container>
                            <ng-container #timedata *ngIf="enableEditIndexBuilding == iBuilding">
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.buildingID" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #ticklerFreq class="form-control" name="{{display.ticklerFreq}}"
                                        type="number" [(ngModel)]="display.ticklerFreq"  min="0" />
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.buildingName" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #ticklerMessage class="form-control" name="{{display.ticklerMessage}}"
                                        type="text" [(ngModel)]="display.ticklerMessage" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #startDate class="form-control" name="{{display.startDate}}"
                                        placeholder="dd-MM-dd HH:mm:ss" type="datetime-local"
                                        [(ngModel)]="display.startDate" />
                                </td>
                                <td id="{{display.tickleID}}"
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <button
                                        (click)="updateBuildingReminder(display.tickleID,display.ticklerFreq,display.ticklerFreq,display.ticklerMessage,display.startDate)"
                                        class="save-edit-reminder-btn">Save
                                        <fa-icon [icon]="faCheck" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="cancelBuilding()" class="cancel-edit-reminder-btn">Cancel
                                        <fa-icon [icon]="faX" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                        </tr>
                    </tbody>
                </table>
            </mat-expansion-panel>
            <!-- shows user's company reminders -->
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title *ngIf="companyreminders">
                        Company <h4 class="mycompany-filterd-number">({{(companyreminders |
                            filter:Companyterm)?.length}})</h4>
                            
                    </mat-panel-title>
                    <button class="excelexport-btn" (click)="companyexportexcel()"><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                    <!-- <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                </mat-expansion-panel-header>
                <input type="text" class="company-reminder-schedule-search" placeholder="Search Company Reminders"
                    [(ngModel)]="Companyterm">
                <table class="company-reminder-schedule-table table-striped" id="company-excel-table">
                    <tr class="reminder-thead">
                        <th>
                            Date
                        </th>
                        <th>
                            Frequency
                        </th>
                        <th>
                            Company ID
                        </th>
                        <th>
                            Company Name
                        </th>
                        <th>

                        </th>
                    </tr>
                    <tbody *ngFor="let display of companyreminders | filter: Companyterm; index as iCompany">
                        <tr class="reminder-schedule-table-row">
                            <ng-container #timedata *ngIf="enableEditIndexCompany != iCompany">
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.startDate}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    every {{display.ticklerFreq}} days
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.companyID}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    {{display.companyName}}
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <button (click)="switchEditModeCompany(iCompany)" class="edit-reminder-btn">Edit
                                        <fa-icon [icon]="faPencil" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="deleteReminder(display.tickleID)"
                                        class="delete-reminder-btn">Delete
                                        <fa-icon [icon]="faTrashCan" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                            <ng-container #timedata *ngIf="enableEditIndexCompany == iCompany">
                                <td id={{display.tickleID}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #startDate class="form-control" name="{{display.startDate}}"
                                        placeholder="dd-MM-dd HH:mm:ss" type="datetime-local"
                                        [(ngModel)]="display.startDate" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #ticklerFreq class="form-control" name="{{display.ticklerFreq}}"
                                        type="number"  min="0" [(ngModel)]="display.ticklerFreq" />
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.companyID" />
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.companyName" />
                                </td>
                                <td *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <button class="save-edit-reminder-btn">Save
                                        <fa-icon [icon]="faCheck" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="cancelCompany()" class="cancel-edit-reminder-btn">Cancel
                                        <fa-icon [icon]="faX" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                        </tr>
                    </tbody>
                </table>
            </mat-expansion-panel>
            <!-- shows user's lease reminders -->
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Lease <h4 class="mycompany-filterd-number">({{(leasereminders | filter:Leaseterm)?.length}})</h4>
                        
                    </mat-panel-title>
                    <button class="excelexport-btn" (click)="leaseexportexcel()"><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                    <!-- <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                </mat-expansion-panel-header>
                <input type="text" class="company-reminder-schedule-search" placeholder="Search Company Reminders"
                    [(ngModel)]="Leaseterm">
                <table class="company-reminder-schedule-table table-striped" id="lease-excel-table">
                    <tr class="reminder-thead">
                            <th>
                                Lease ID
                            </th>
                            <th>
                                Client Lease ID
                            </th>
                            <th>
                                Reminder Frequency
                            </th>
                            <th>
                                Reminder Message
                            </th>
                            <th>
                                Reminder Date
                            </th>
                            <th>

                            </th>
                        </tr>

                    <tbody *ngFor="let display of leasereminders| filter: Leaseterm; index as iLease">
                        <tr class="reminder-schedule-table-row">
                            <ng-container #timedata *ngIf="enableEditIndexLease != iLease">
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.reminderID}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.clientLeaseID}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    every {{display.reminderFreq}} days
                                </td>

                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.reminderMessage}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.startDate | date:'MMM d, yyyy h:ss aa'}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <button (click)="switchEditModeLease(iLease)" class="edit-reminder-btn">Edit
                                        <fa-icon [icon]="faPencil" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="deleteReminder(display.reminderID)"
                                        class="delete-reminder-btn">Delete
                                        <fa-icon [icon]="faTrashCan" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                            <ng-container #timedata *ngIf="enableEditIndexLease == iLease">
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.reminderID" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.clientLeaseID" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input #reminderFreq class="form-control" name="{{display.reminderFreq}}"
                                        type="number"  min="0" [(ngModel)]="display.reminderFreq" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input #reminderMessage class="form-control" name="{{display.reminderMessage}}"
                                        type="text" [(ngModel)]="display.reminderMessage" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #startDate class="form-control" name="{{display.startDate}}"
                                        placeholder="dd-MM-dd HH:mm:ss" type="datetime-local"
                                        [(ngModel)]="display.startDate" />
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <button
                                        (click)="updateLeaseReminder(display.reminderID,display.reminderFreq,display.reminderFreq,display.reminderMessage,display.startDate)"
                                        class="save-edit-reminder-btn">Save
                                        <fa-icon [icon]="faCheck" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="cancelLease()" class="cancel-edit-reminder-btn">Cancel
                                        <fa-icon [icon]="faX" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                        </tr>
                    </tbody>
                </table>
            </mat-expansion-panel>
            <!-- Shows user's Report reminders
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Report
                    </mat-panel-title>
                    <button class="excelexport-btn" ><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                    <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                <!-- </mat-expansion-panel-header>
                <ul class="scheduled-reminder-list">
                    <li class="Scheduled-reminder"> dummy data</li>
                    <li class="Scheduled-reminder"> dummy data</li>
                    <li class="Scheduled-reminder"> dummy data</li>
                    <li class="Scheduled-reminder"> dummy data</li>
                    <li class="Scheduled-reminder"> dummy data</li>
                    <li class="Scheduled-reminder"> dummy data</li>

                </ul>
            </mat-expansion-panel> --> 
            <!-- Shows User's project Reminders -->
            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Projects <h4 class="mycompany-filterd-number">({{(projectReminders |
                            filter:Projectterm)?.length}})
                        </h4>
                    </mat-panel-title>
                    <button class="excelexport-btn" (click)="projectexportexcel()"><fa-icon class="excel-icon" [icon]="faFileExcel" size='1x'></fa-icon> Export</button>
                    <!-- <mat-panel-description>
                        Reminders
                    </mat-panel-description> -->
                </mat-expansion-panel-header>
                <input type="text" class="company-reminder-schedule-search" placeholder="Search Company Reminders"
                    [(ngModel)]="Projectterm">
                <table class="company-reminder-schedule-table table-striped" id="project-excel-table">
                    <tr class="reminder-thead">
                        <th>
                            Project ID
                        </th>
                        <th>
                            Project Name
                        </th>
                        <th>
                            Reminder Frequency
                        </th>
                        <th>
                            Reminder Message
                        </th>
                        <th>
                            Reminder Date
                        </th>
                    </tr>
                        <td>

                        </td>
                    
                    <tbody *ngFor="let display of projectReminders| filter: Projectterm; index as iProjects">
                        <tr class="reminder-schedule-table-row">
                            <ng-container #timedata *ngIf="enableEditIndexProjects != iProjects">
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.projectID}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.projectName}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    every {{display.ticklerFrequency}} days
                                </td>

                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.ticklerMessage}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    {{display.userDefinedDate | date:'MMM d, yyyy h:ss aa'}}
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <button (click)="switchEditModeProjects(iProjects)" class="edit-reminder-btn">Edit
                                        <fa-icon [icon]="faPencil" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="deleteReminder(display.reminderID)"
                                        class="delete-reminder-btn">Delete
                                        <fa-icon [icon]="faTrashCan" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                            <ng-container #timedata *ngIf="enableEditIndexProjects == iProjects">
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.projectID" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input readonly [(ngModel)]="display.projectName" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input #ticklerFrequency class="form-control" name="{{display.ticklerFrequency}}"
                                        type="number" min="0" [(ngModel)]="display.ticklerFrequency" />
                                </td>
                                <td id={{display.reminderID}}
                                    *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <input #ticklerMessage class="form-control" name="{{display.ticklerMessage}}"
                                        type="text" [(ngModel)]="display.ticklerMessage" />
                                </td>
                                <td id={{display.tickleID}}
                                    *ngIf="display.isDeleted == false  && display.contactID == userObj.contactID">
                                    <input #startDate class="form-control" name="{{display.userDefinedDate}}"
                                        placeholder="dd-MM-dd HH:mm:ss" type="datetime-local"
                                        [(ngModel)]="display.userDefinedDate" />
                                </td>
                                <td *ngIf="display.isDeleted == false && display.contactID == userObj.contactID">
                                    <button
                                        (click)="updateProjectReminder(display.tickleID,display.ticklerFrequency,display.ticklerFrequency,display.ticklerMessage,display.userDefinedDate)"
                                        class="save-edit-reminder-btn">Save
                                        <fa-icon [icon]="faCheck" size='1x'></fa-icon>
                                    </button>
                                    <button (click)="cancelProjects()" class="cancel-edit-reminder-btn">Cancel
                                        <fa-icon [icon]="faX" size='1x'></fa-icon>
                                    </button>
                                </td>
                            </ng-container>
                        </tr>
                    </tbody>
                </table>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</ng-template>
<ng-template #content1 let-modal style="z-index: 1000;">
    <div class="modal-header">
        <div class="modal-header-left">
            <button type="button" class="btn btn-dark"
                (click)="modal.close('Close click'); cancelBuilding(); cancelLease();cancelProjects(); cancelCompany()">
                <fa-icon [icon]="faXmark" size='sm'></fa-icon>
            </button>
        </div>
        <div class="modal-header-right">
            <img class="modal-header-logo" src="assets/Images/homelogocopy.png" />
            <h1 class="header-logo-text">| Real Estate Manager</h1>
        </div>
    </div>

    <h4>Contact Reminder Selection: </h4>
    <div #reminderinputs class="reminder-inputs">
        <form #selectreminder="ngForm" (ngSubmit)="onSubmit()">
            <!-- pulls in list of option types -->
            <label class="add-reminder-label">Select an Option</label>
            <ng-select aria-required="true" *ngIf="optiontype" (change)="changeOT(selectedOptionType)"
                [(ngModel)]="selectedOptionType" name="selectedOptionType" [items]="optiontype"
                bindLabel="tickleDescription" placeholder="Select an Option Type" appendTo="body" [multiple]="true"
                [closeOnSelect]="false">
                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                    <input id="item-{{index}}" type="checkbox" name="item-{{index}}" [ngModel]="item$.selected" />
                    {{item}}
                </ng-template>
            </ng-select>



            <!-- Pulls in list of Hierachies -->
            <label  *ngIf="hierarchy && showCompanyDrop !== true" class="add-reminder-label">Select a hierarchy</label>
            <ng-select aria-required="true" (change)="changeH(selectedHierarchy)" [(ngModel)]="selectedHierarchy"
                *ngIf="hierarchy  && showCompanyDrop !== true " [items]="hierarchy" name="selectedHierarchy"
                bindLabel="companyHierarchyLabelDesc" placeholder="Select a Hierarchy" appendTo="body" [multiple]="true"
                [closeOnSelect]="false">
                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                    <input id="item-{{index}}" type="checkbox" name="item-{{index}}" [ngModel]="item$.selected" />
                    {{item}}
                </ng-template>
            </ng-select>


            <!-- Building DropDown -->
            <label  *ngIf="buildingName && showBuildingDrop === true" class="add-reminder-label">Select a building</label>
            <ng-select aria-required="true" *ngIf="buildingName && showBuildingDrop === true"
                (change)="changeBuilding(selectedBuilding)" [(ngModel)]="selectedBuilding" name="selectedBuilding"
                [items]="buildingName" bindLabel="buildingName" placeholder="Select a Building" appendTo="body"
                [multiple]="true" [closeOnSelect]="false">
                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                    <input id="item-{{index}}" type="checkbox" name="item-{{index}}" [ngModel]="item$.selected" />
                    {{item}}
                </ng-template>
            </ng-select>

            <!-- Lease DropDown -->
            <ng-select aria-required="true" *ngIf="leaseName && showLeaseDrop === true"
                (change)="changeLease(selectedLease)" [(ngModel)]="selectedLease" name="selectedLease"
                [items]="leaseName" bindLabel="leaseName" placeholder="Select a Lease" appendTo="body" [multiple]="true"
                [closeOnSelect]="false">
                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                    <input id="item-{{index}}" type="checkbox" name="item-{{index}}" [ngModel]="item$.selected" />
                    {{item}}
                </ng-template>
            </ng-select>

            <!-- Company routes need to be added to grab data -->
            <label  *ngIf="companyname && showCompanyDrop === true" class="add-reminder-label">Select a company</label>
            <ng-select aria-required="true" (change)="changeCompany(selectedCompany)" [(ngModel)]="selectedCompany"
                *ngIf="companyname && showCompanyDrop === true" [items]="companyname" name="selectedCompany"
                bindLabel="companyHierarchyLabelDesc" placeholder="Select a Company" appendTo="body" [multiple]="true"
                [closeOnSelect]="false">
                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                    <input id="item-{{index}}" type="checkbox" name="item-{{index}}" [ngModel]="item$.selected" />
                    {{item}}
                </ng-template>
            </ng-select>

            <label class="add-reminder-label">Start Date</label>
            <input [(ngModel)]="userdefineddate" name="userdefineddate" class="form-control" type="datetime-local">
            <label class="add-reminder-label">Days Out</label>
            <input [(ngModel)]="daysOut" name="daysOut" type="number"  min="0" class="form-control" placeholder="Days Out"
                aria-label="DaysOut" aria-describedby="basic-addon1">
                <label class="add-reminder-label">Frequency</label>
            <input [(ngModel)]="Frequency" name="Frequency" type="number"  min="0" class="form-control" placeholder="Frequency"
                aria-label="Frequency" aria-describedby="basic-addon1">
                <label class="add-reminder-label">Email Message</label>

            <textarea [(ngModel)]="Message" name="Message" type="text" class="form-control" placeholder="Email Message"
                aria-label="EmailMessage" aria-describedby="basic-addon1"></textarea>
            <button type="submit" (click)="reminderinputs.scrollTop = 0; "mat-raised-button color="blue">
                Add Reminder
            </button>
        </form>
    </div>
</ng-template>